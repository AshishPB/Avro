<html>
<head>
<title>$title</title>
<script type="text/javascript" src="/protovis-r3.2.js"></script>
<script type="text/javascript" src="/tipsy.js"></script>
<script src="/jquery-1.4.2.min.js" type="text/javascript"></script>
<script src="/jquery.tipsy.js" type="text/javascript"></script>
<script src="/tipsy.js" type="text/javascript"></script>
<link href="tipsy.css" type="text/css" rel="stylesheet"/>

<script>
    function makeDotChart(yVals) {
	    var xVals = pv.range(1, yVals.length + 1);
	    var data = new Array();
	    var dotColors = pv.Colors.category20().range();
	    
	    for (i = 0; i < yVals.length; i = i + 1) {
	      data[i] = {x: xVals[i], y: yVals[i]};
	    }
    
		/* Sizing and scales. */
		var w = 200,
		    h = 250,
		    x = pv.Scale.linear(0, Math.max.apply(Math, xVals)).range(0, w),
		    y = pv.Scale.linear(0, Math.max.apply(Math, yVals)).range(0, h),
		    c = pv.Scale.linear(1, 20).range("orange", "brown");
		
		/* The root panel. */
		var vis = new pv.Panel()
		    .width(w)
		    .height(h)
		    .bottom(20)
		    .left(50)
		    .right(10)
		    .top(5);
		
		/* Y-axis and ticks. */
		vis.add(pv.Rule)
		    .data(y.ticks())
		    .bottom(y)
		    .strokeStyle(function(d) d ? "#eee" : "#000")
		  .anchor("left").add(pv.Label)
		    .text(y.tickFormat);

		
		/* The dot plot! */
		vis.add(pv.Panel)
		    .data(data)
		    .add(pv.Dot)
		    .left(function(d) x(d.x))
		    .bottom(function(d) y(d.y))
		    .strokeStyle(function(d) dotColors[d.x % 20])
		    .fillStyle(function() this.strokeStyle().alpha(1))
		    .title(function(d) d.y)
		    .event("mouseover", pv.Behavior.tipsy({gravity: "n", 
		      fade: false, delayIn: 0}));
		vis.render();
	}


    function makeBarChart(labels, boundries, data) {
		var w = 200,
		    h = 250,
		    x = pv.Scale.ordinal(pv.range(data.length)).splitBanded(0, w, 4/5),
		    y = pv.Scale.linear(0, Math.max.apply(Math, data)).range(0, h),
		    i = -1,
		    c = pv.Scale.linear(1, 5, 20).range("green", "yellow", "red");

		var vis = new pv.Panel()
		    .width(w)
		    .height(h)
		    .bottom(20)
		    .left(40)
		    .right(5)
		    .top(30);
		
		var bar = vis.add(pv.Bar)
		    .data(data)
		    .left(function(){ return x(this.index); })
		    .width(10)
		    .bottom(0)
		    .height(y)
		    .fillStyle(function(d) "#1f77b4")
		    .title(function() { return boundries[this.index]; })
		    .event("mouseover", pv.Behavior.tipsy({gravity: "n", 
		      fade: false, delayIn: 0}));
		
		bar.anchor("bottom").add(pv.Label)
        	.textMargin(5)
    		.textBaseline("top")
    		.text(function() (this.index % 4 == 0) ? labels[this.index]: "");		
		
		vis.add(pv.Rule)
		    .data(y.ticks())
		    .bottom(function(d) Math.round(y(d)) - .5)
		    .strokeStyle(function(d) d ? "rgba(255,255,255,.3)" : "#000")
		  .add(pv.Rule)
		    .left(0)
		    .width(5)
		    .strokeStyle("#000")
		  .anchor("left").add(pv.Label)
		    .text(function(d) d.toFixed(1));
		vis.render();
	}
</script>
</head>
<body>
  <h1>$title</h1>
  <p>
    Running since: $startupTime<br>
    Currently: $currTime
  </p>
  
  #if ($inFlightRpcs.size() != 0) 
  <h4>Active RPC's</h4>
    <ol>
    #foreach( $rpc in $inFlightRpcs ) 
      <li>$rpc</li>
    #end
    </ol>
  #end
    #foreach( $method in $methodDetails ) 
      $method
    #end
    <script type="text/javascript+protovis">

</script>


</body>
</html>